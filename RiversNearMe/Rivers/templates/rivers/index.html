{% extends "base.html" %}
{% block content %}
<div class="center">
    <form action="/rivers/" method="post">
        {% csrf_token %}
        <label for="loc">Location: </label>
        <input id="loc" type="text" name="loc" value="22192">
        <label for="dist">Max Distance: </label>
        <input id="dist" type="text" name="dist" maxlength="4" size="4" value="60">
        <button type="submit" class="btn btn-primary">Submit</button>
    </form>
</div>

{%if error %}
    <div class="alert alert-danger">
        <b>Error: </b>{{error}}
    </div>
{% endif %}

{% if pm_list %}
    <div style="margin-top: 20px;" class="panel panel-primary">
            <div class="panel-heading">
                <h3 class="panel-title">Found {{pm_list|length}} rivers within {{distance}} miles of {{spec_location}}</h3>
            </div>
        <table class="table table-striped" style="table-layout: fixed;">
            <tr>
                <th>Section</th>
                <th>River</th>
                <th>Class</th>
                <th>Gauge</th>
                <th>Stage</th>
                <th>Flow</th>
                <th>Water Temp</th>
                <th>Distance (in miles)</th>
            </tr>
            {% for pm_dict in pm_list %}
                <tr>
                    <td>{{pm_dict.placemark.section}}</td>
                    <td>{{pm_dict.placemark.name}}</td>
                    <td>{{pm_dict.placemark.class_field}}</td>
                    <td><a href='http://waterdata.usgs.gov/usa/nwis/uv?{{pm_dict.placemark.usgs_gauge}}'>{{pm_dict.placemark.usgs_gauge}}</a></td>
                    <td>{{pm_dict.placemark.usgs_gauge.flow}} cfs</td>
                    <td>{{pm_dict.placemark.usgs_gauge.stage}} ft</td>
                    <td>{{pm_dict.placemark.usgs_gauge.water_temp}}</td>
                    <td>{{pm_dict.distance}}</td>
                </tr>
            {% endfor %}
        </table>
    </div>
{% endif %}
{% endblock %}